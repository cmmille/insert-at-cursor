(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s.TextAreaUtils={}))})(this,function(s){"use strict";var l=Object.defineProperty;var c=(s,e,r)=>e in s?l(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var a=(s,e,r)=>(c(s,typeof e!="symbol"?e+"":e,r),r);class e{constructor(t,i){a(this,"textarea");a(this,"select");a(this,"preview");var o;this.textarea=document.getElementById(t),this.select=document.getElementById(i),this.preview=document.createElement("div"),this.preview.id="preview",this.preview.classList.add("form-control"),this.preview.style.display="none",this.preview.innerHTML='<span class="preview-text"></span>',(o=this.textarea.parentNode)==null||o.insertBefore(this.preview,this.textarea.nextSibling),this.textarea.addEventListener("scroll",()=>this.setScrollPosition()),this.textarea.addEventListener("input",()=>this.setCursorPosition())}valueAtEnd(){const t=this.textarea.value,i=this.select.value;return t?t+`
`+i:i}valueAtCursor(){const t=this.getCurrentCursorPosition(),i=this.textarea.value,o=this.select.value;return i.slice(0,t)+o+i.slice(t)}valueForPreview(){const i=`<span class="preview-text">${this.select.value||""}</span>`,o=this.textarea.value||"",n=parseInt(this.textarea.dataset.cursorPosition||"");return(o.slice(0,n)+i+o.slice(n)).replace(/\n/g,"<br>")}addAtEnd(){const t=this.valueAtEnd();this.addFact(t)}addAtCursor(){const t=this.valueAtCursor();this.addFact(t)}addFact(t){this.textarea.value=t}setCursorPosition(){const t=this.textarea.selectionStart;this.textarea.dataset.cursorPosition=t.toString()}getCurrentCursorPosition(){return parseInt(this.textarea.dataset.cursorPosition||"")}setScrollPosition(){const t=this.textarea.scrollTop;this.textarea.dataset.scrollPosition=t.toString()}getScrollPosition(){return parseInt(this.textarea.dataset.scrollPosition||"")}showPreview(){this.setCursorPosition();const t=this.valueForPreview();this.textarea.style.display="none",this.preview.innerHTML=t,this.preview.style.display="block";const i=this.getScrollPosition();this.preview.scrollTop=i}hidePreview(){this.textarea.style.display="block",this.preview.style.display="none"}}s.TextAreaSelectUtility=e,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
